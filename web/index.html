<!DOCTYPE html>
<html>
    <head>
        <title>Formulario Para Registro de Alumnos</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
             <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" />
             <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
             <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="crossorigin="anonymous"></script>
             <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
             <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
             
            <style>
                 
                body{
                    
                    background: url("Imagenes/Fondo.jpg") no-repeat right fixed;
                    background-size: cover;
                }
            </style>
  
    </head>
         <body>
               <script>
                 $(document).ready(function(){
                     
                     $('.navContainer').load('Estilo/nav.html');
                     $("#btnregistro");
                     $().alert();
                     $('#myAlert').on('colosed.bs.alert',function(){
                         guardadRegistro();
                         
                         
                     });
                     $('#btnregistro').click(function(){
                         guardadRegistro();
                        
                        function guardarRegistro(){
                           $.ajax({
                               url:"NewServlet",
                               dataType:"html",
                               data: $("#formularioDeAlumno").serialize(),
                               method:"POST",
                               success:function(respuestaDelServidor){
                                   $("#msjExito").show();
                                   $("#msjExito").hide(3000);
                                   
                                   
                               }
                               
                               
                           }) 
                            
                            
                        }
                         
                     });
                     
                 });
                 
             </script>
             
             
            
        
             
             
             
             <div class="navContainer"></div>
                    <center> <h1 style="color:white;" >Registro de Alumnos </h1> </center>
                    
             
                 
                 <div class="row justify-content-center">
                     <div class="col-12">
                     
                            <form  id="formularioDeAlumno">
                                   <div class="col-md-3">
                                          <div class="alert alert-success" role="alert" style="display: none;" id="msjExito" >
                                            Tarjeta agregada exitosamente!
                                          </div>


                                       <label for="exampleInputNum" style="color:white">Número de Carné:</label>
                                     <input style="border-radius: 35px 35px 35px 35px;" type="text" class="form-control" id="nocarne" name="nocarne" placeholder="Ingrese su Número de Carné">
                                     
                                   </div>
                                       <div class="col-md-3">

                                           <label for="exampleInputNom" style="color:white" >Nombre y Apellido:</label>
                                          <input style="border-radius: 35px 35px 35px 35px;" type="text" class="form-control" id="nombre" name="nombre" placeholder="Ingrese su Nombre y Apellido">

                                        </div>
                                <div class="col-md-3">

                                               <label for="exampleInput" style="color: white">Correo:</label>
                                            <input style="border-radius: 35px 35px 35px 35px;" type="text" class="form-control" id="correo" name="correo" placeholder="Ingrese su Correo">

                                          </div>   

                                               <div class="col-md-3">

                                                   <label for="exampleInput" style="color: white">Número de Teléfono:</label>
                                                <input style="border-radius: 35px 35px 35px 35px;" type="text" class="form-control" id="cel" name="cel" placeholder="Ingrese su Número de Teléfono">

                                              </div>


                                                       <div class="col-md-3">

                                                               <label for="exampleInput" style="color: white">Dirección:</label>
                                                            <input style="border-radius: 35px 35px 35px 35px;" type="text" class="form-control" id="diric" name="diric" placeholder="Ingrese su Dirección">

                                                       </div>
                                                             <br>
                                                             <div class="col-md-5">
                                                                 <button id="btnregistrar" class="btn btn-primary  "style="border-radius: 35px 35px 35px 35px">Registro</button>>
                                                                 <button  id="btnmostrar" class="btn btn-primary  "style="border-radius: 35px 35px 35px 35px" >Mostrar Datos</button>
                                                            </div>
                    </div>                                
                     
                </div>  
            
                   </form>
                         <table class="table table-dark" id="tabla">
                                <thead>
                                  <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Carné</th>
                                    <th scope="col">Nombre</th>
                                    <th scope="col">Correo</th>
                                    <th scope="col">Número de Teléfono</th>
                                    <th scope="col">Dirección</th>
                                    
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr>
                                    <th id="cero" scope="row">1</th>
                                    <td> </td>
                                    <td id="d1"></td>
                                    <td id="d2"></td>
                                    <td id="d3"></td>
                                    <td id="d4"></td>
                                  </tr>
                                  <tr>
                                    <th scope="row">2</th>
                                    <td>Jacob</td>
                                    <td>Thornton</td>
                                    <td>@mdo</td>
                                    <td>@mdo</td>
                                    <td>@mdo</td>
                                  </tr>
                                  <tr>
                                    <th scope="row">3</th>
                                    <td>Larry</td>
                                    <td>the Bird</td>
                                    <td>@twitter</td>
                                    <td>@twitter</td>
                                    <td>@mdo</td>
                                  </tr>
                                </tbody>
                              </table>
                         
                      
                              
                         
                 
                         <script>
                             
                            var controlPaginaCheck = 0;
                                        var controlPaginaRegister = 0;
                                   $(document).ready(function(){

                                       $('form input').keyup(function() {
                                           $("#successReg").hide();
                                           var empty = false;
                                           $('form input').each(function() {
                                               if ($(this).val() === "") {
                                                   empty = true;
                                               }
                                           });

                                           if (empty) {
                                               $('#btnmostrar').prop( "disabled", true );
                                           } else {
                                               $('#btnmostrar').prop( "disabled", false );
                                           }});

                                     //$("#formularioDeAlumno").hide();
                                      $('#tabla').hide();
                                       
                                     

                                   });
                                   
                                  $(".redForms").click(function(){
                                        
                                        $('#tabla').show();
                                       
                                        getStartRead();
                                    });
                                         $("#btnmostrar").click(function(){
                                                getStartRead();
                                            });

                                   function getStartRead(){
                                       $.ajax({
                                           method: "GET",
                                           url:"tabla",
                                           data:{
                                               "pControl":0
                                           },
                                           
                                          success:function(respuesta){
                                               var jsonRespuesta = jQuery.parseJSON(respuesta );
                                               $("#d1").text(jsonRespiesta.carnet);
                                               $("#d2").text(jsonRespuesta.name);                                         
                                               $("#d3").text(jsonRespuesta.correo);
                                               $("#d4").text(jsonRespuesta.cel);
                                               $("#d5").text(jsonRespuesta.direccion);
                                           },
                                           error : function(){
                                               console.log("Error");
                                           }
                                       });

                                   };

                                   function lastPage(){
                                       if(controlPaginaCheck > 0){
                                           controlPaginaCheck--;
                                           $.ajax({
                                          method: "GET",
                                          url:"ControlDeFormulario",
                                          data:{
                                              "pagControl":controlPaginaCheck
                                          },
                                         success:function(respuesta){
                                              var jsonRespuesta = jQuery.parseJSON(respuesta );
                                              $("#rspName").text(jsonRespuesta.name);
                                              $("#rspLast").text(jsonRespuesta.lname);
                                              $("#rspCarnet").text(jsonRespuesta.carnet);
                                              $("#rspEmail").text(jsonRespuesta.email);
                                              $("#rspPhone").text(jsonRespuesta.telefono);
                                              $("#rspAddress").text(jsonRespuesta.direccion);
                                          },
                                          error : function(){
                                              console.log("Error");
                                          }
                                      });
                                       }
                                       else{
                                           console.log("no mas atras")
                                       }

                                   };

                                   function nextPage(){
                                       if(!((controlPaginaCheck+1) === controlPaginaRegister) && controlPaginaRegister > controlPaginaCheck){
                                           controlPaginaCheck++;
                                        $.ajax({
                                           method: "GET",
                                           url:"ControlDeFormulario",
                                           data:{
                                               "pagControl":controlPaginaCheck
                                           },
                                          success:function(respuesta){
                                               var jsonRespuesta = jQuery.parseJSON(respuesta );
                                               $("#rspName").text(jsonRespuesta.name);
                                               $("#rspLast").text(jsonRespuesta.lname);
                                               $("#rspCarnet").text(jsonRespuesta.carnet);
                                               $("#rspEmail").text(jsonRespuesta.email);
                                               $("#rspPhone").text(jsonRespuesta.telefono);
                                               $("#rspAddress").text(jsonRespuesta.direccion);

                                                    console.log("Siguiente desactivado desde boton siguiente");
                                                console.log(controlPaginaCheck)
                                           },
                                           error : function(){
                                               console.log("Error");
                                           }
                                       });}
                                   else{
                                                    console.log("No mas siguiente");
                                                }
                                   }


                                   function registering(){
                                       if(controlPaginaRegister < 11){
                                           $.ajax({
                                                  type: "POST",
                                                  url: "", 
                                                  data:{
                                                      "nombre":$("#firstName").val(),
                                                      "apellido":$("#lastName").val(),
                                                      "carnet":$("#carnet").val(),
                                                      "email":$("#email").val(),
                                                      "celular":$("#phoneNumber").val(),
                                                      "direccion":$("#address").val(),
                                                      "pagControlRegister" : controlPaginaRegister
                                                  },
                                                  success:function(respuesta){
                                                      console.log(controlPaginaCheck);
                                                      console.log(controlPaginaRegister);
                                                      controlPaginaRegister++;
                                                      $("#successReg").show(2000);
                                                      resetForm();
                                                  }
                                      });
                                       }   else{
                                           console.log("No hay mas espacio en array")
                                       }
                                      console.log(controlPaginaRegister);
                                   }
                             
                         </script>
             
          </body>
          
          
       
</html>
            